<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>

    <div class="cart-header">
        <a href="menu">
            <svg class="back-arrow-icon" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewBox="0 0 78 78" fill="none">
                <path d="M39 26L26 39M26 39L39 52M26 39H52M71.5 39C71.5 56.9493 56.9493 71.5 39 71.5C21.0507 71.5 6.5 56.9493 6.5 39C6.5 21.0507 21.0507 6.5 39 6.5C56.9493 6.5 71.5 21.0507 71.5 39Z" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </a>
        <h1 class="cart-title">Shopping Cart</h1>
        <span class="cart-item-count"><%= totalQuantity %> item(s)</span>
    </div>

    <% if (cartItems.length > 0) { %>
        <div class="cart-items-container">
            <% cartItems.forEach(item => { %>
                <div class="cart-item" data-item-id="<%= item._id %>">
                    <img src="<%= item.image %>" alt="<%= item.name %>" class="cart-item-image">
                    <div class="cart-item-details">
                        <h2 class="cart-item-title"><%= item.name %></h2>
                        <p class="cart-item-description"><%= item.description %></p>
                        <p class="menu-card-price">₦<%= item.price %></p>
                        <div class="cart-item-counter">
                            <button class="cart-counter-minus" data-id="<%= item._id %>">-</button>
                            <span class="cart-counter-value" data-id="<%= item._id %>"><%= item.quantity %></span>
                            <button class="cart-counter-plus">+</button>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    <% } else { %>
        <div class="empty-cart-container"> 
            <img src="images/shopping-bag-icon.svg" alt="Shopping Bag" class="shopping-bag-icon">
            <p class="empty-cart-text">No item in your cart.</p>
        </div>
    <% } %>

    <div class="cart-footer">
        <div class="subtotal">
            <span class="subtotal-label">Sub total</span>
            <span class="subtotal-value">₦<%= subtotal %></span>
        </div>
        <div class="total">
            <span class="total-label">TOTAL</span>
            <span class="total-value">₦<%= totalPrice %></span>
        </div>
        <button class="checkout-button" onclick="window.location.href='/checkout'">Proceed to Checkout</button>
    </div>
     
    <script src="/scripts/cart.js"></script>
</body>
</html>